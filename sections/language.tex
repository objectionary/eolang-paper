% SPDX-FileCopyrightText: Copyright (c) 2016-2025 Objectionary.com
% SPDX-License-Identifier: MIT

The entire syntax of the \eolang{} language in BNF is available on the first page of the \texttt{objectionary/eo} GitHub repository%
  \footnote{\url{https://github.com/objectionary/eo}}.
In this section, we only explain key concepts of the language.

\section{Informal Overview}

Similar to Python~\citep{lutz2013learning}, indentation in \eolang{} is part of the syntax: the scope of a code block is determined by its horizontal position in relation to other blocks~\citep{landin1966next}.
There are no keywords in \eolang{} but only a special symbols denoting grammar constructs, such as \ff{>} for attribute naming, \ff{.} for dynamic dispatch, and \ff{[]} for specifying parameters of formations.

% formation + application + dataization
% decoration
% FFI atoms
% caching dynamic dispatch
% rho
% synthetic attributes
% const
% idempotence
% lints

% true, false, if
% try/catch
% seq, goto, while,
% tuples
% malloc
% number
% const

\subsection{Objects}

In \eolang{} runtime, every object is represented by an \emph{actor}.
An actor responds to a few requests:
\begin{itemize}
  \item \ff{copy()} makes a copy of itself
  \item \ff{take(attr)} returns a reference to an actor
  \item \ff{put(attr, actor)} saves a reference to an actor
  \item \ff{delta()} turns itself to data
\end{itemize}

A \emph{formation} is represented by an actor that is an associative array of attributes vs immutable object references.
An \emph{application} is an actor with an object reference (called ``prototype''), an attribute, and an immutable object reference (called ``argument'').
A \emph{dispatch} is an actor with an object reference (called ``base''), an attribute, and a mutable---initially blank---object reference.

\begin{ffcode}
[qty price] > order
  qty.mul > cost
    price
\end{ffcode}

The code is equivalent to the following \phic{} expression:
\begin{phiquation}
\Big\{ order -> [[ qty -> ?, price -> ?, cost -> \xi.qty.mul(\xi.price) ]] \Big\}
\end{phiquation}

The code is translated to the following actors:

\begin{tikzpicture}
[every node/.style={draw},
up/.style={draw=none, anchor=south west, label position=north west, text width=12em, align=left},
down/.style={draw=none, anchor=north west, label position=south west}]
\node [label={[up]$b_1=[[ qty -> ?, price -> ?, cost -> b_4 ]]$}, fill=blue!5] (b1)
  {\parbox{7em}{
  \begin{tabularx}{\linewidth}{Xl}
  \ff{qty}: & \(\varnothing\) \\
  \ff{price}: & \(\varnothing\) \\
  \ff{cost}: & \(b_4\) \\
  \(\rho\): & \(\varnothing\) \\
  \end{tabularx}}};
\node [label={[up]$b_2 = b_1.qty$}, above right=0 and 2 of b1, fill=green!5] (b2)
  {\parbox{7em}{
  \begin{tabularx}{\linewidth}{Xl}
  \ff{target}: & \(b_1\) \\
  \ff{attr}: & \ff{qty} \\
  \ff{object}: & \(\varnothing\) \\
  \end{tabularx}}};
\node [label={[up]$b_3 = b_2.mul$}, fill=green!5, right=of b2] (b3)
  {\parbox{7em}{
  \begin{tabularx}{\linewidth}{Xl}
  \ff{target}: & \(b_2\) \\
  \ff{attr}: & \ff{mul} \\
  \ff{object}: & \(\varnothing\) \\
  \end{tabularx}}};
\node [label={[up]$b_4 = b_3(0-> b_5)$}, fill=red!5, below=of b3] (b4)
  {\parbox{7em}{
  \begin{tabularx}{\linewidth}{Xl}
  \ff{target}: & \(b_3\) \\
  \ff{attr}: & \(\alpha_0\) \\
  \ff{object}: & \(b_5\) \\
  \end{tabularx}}};
\node [label={[up]$b_5 = b_1.price$}, fill=green!5, left=of b4] (b5)
  {\parbox{8em}{
  \begin{tabularx}{\linewidth}{Xl}
  \ff{target}: & \(b_1\) \\
  \ff{attr}: & \ff{price} \\
  \ff{object}: & \(\varnothing\) \\
  \end{tabularx}}};
\end{tikzpicture}

When being asked to

\subsection{Formation}

\begin{ffcode}
[isbn] > book
  "Object Thinking" > title
  39.95 > price
\end{ffcode}

This syntax is translated to the following object:

\begin{tikzpicture}
[every node/.style={draw}, every label/.style={draw=none, anchor=south west, label position=north west}]
\node [label={\(b_1\) (formation)}, fill=blue!5] (b1)
  {\parbox{7em}{
  \begin{tabularx}{\linewidth}{Xl}
  \ff{isbn}: & \(\varnothing\) \\
  \ff{title}: & \(b_2\) \\
  \ff{price}: & \(b_3\) \\
  \(\rho\): & \(\varnothing\) \\
  \end{tabularx}}};
\end{tikzpicture}


Then,  ...
